<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>TQtadka</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- Google Font -->
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@600;700&display=swap"
          rel="stylesheet">

    <!-- Bootstrap -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
          rel="stylesheet">

    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css"
          rel="stylesheet">

    <!-- Custom Styles -->
    <link rel="stylesheet" th:href="@{/css/style.css}">
</head>

<body>

<!-- ================= HEADER ================= -->
<th:block th:with="lang=${lang ?: 'en'}">
    <div th:replace="~{fragments/header :: header}"></div>
</th:block>

<div class="page-content">

    <!-- ================= HERO ================= -->
    <div th:replace="~{fragments/hero :: hero}"></div>

    <!-- ================= MAIN ================= -->
    <div class="container mt-0 pt-5">

        <!-- ================= LATEST POSTS (GRID) ================= -->
        <h4 class="fw-bold mb-4">
            <span th:text="${lang == 'kn' ? '‡≤á‡≤§‡≥ç‡≤§‡≥Ä‡≤ö‡≤ø‡≤® ‡≤≤‡≥á‡≤ñ‡≤®‡≤ó‡≤≥‡≥Å' : 'Latest Posts'}"></span>
        </h4>

        <div class="row g-4" th:if="${posts != null and !#lists.isEmpty(posts)}">
            <div class="col-md-4" th:each="post : ${posts}">
                <a th:href="@{/{lang}/blog/{slug}(lang=${lang},slug=${post.slug})}"
                   class="card post-card h-100 text-decoration-none text-dark shadow-sm">

                    <!-- ‚úÖ 16:9 THUMBNAIL WRAPPER -->
                    <div class="thumbnail-16x9">
                        <img th:src="${post.imageUrl ?: '/images/placeholder.png'}"
                             alt="Post image">
                    </div>

                    <div class="card-body d-flex flex-column">
                        <small class="text-muted text-uppercase"
                               th:text="${post.category}"></small>

                        <h6 class="fw-bold mt-1" th:text="${post.title}"></h6>

                        <!-- STATS -->
                        <div class="d-flex gap-3 mt-auto small text-muted align-items-center">
                            <span class="d-flex align-items-center gap-1">
                            <i class="bi bi-eye"></i>
                            <span th:text="${post.views}">0</span>

                            <!-- Separator -->
                            <span class="mx-2">‚Ä¢</span>

                            <span th:text="${post.readingTimeMinutes} + ' min read'"></span>

                            <span class="mx-2">‚Ä¢</span>

                            <!-- Time Ago -->
                            <span th:text="${post.timeAgo}"></span>
                            </span>
                        </div>
                    </div>
                </a>
            </div>
        </div>

        <!-- ================= TRENDING AI ================= -->
        <section class="home-carousel-section mt-5"
                 th:if="${trendingAI != null and !#lists.isEmpty(trendingAI)}">

            <div class="carousel-header">
                <h3 class="carousel-title">ü§ñ Trending in AI</h3>
                <a th:href="@{/{lang}/category/AI(lang=${lang})}"
                   class="carousel-view-all">View all</a>
            </div>

            <div class="carousel-wrapper">

                <!-- LEFT -->
                <button class="carousel-arrow left hidden"
                        onclick="scrollCarousel(this, -1)">
                    <i class="bi bi-chevron-left"></i>
                </button>

                <!-- TRACK -->
                <div class="carousel-track">
                    <a th:each="post : ${trendingAI}"
                       th:href="@{/{lang}/blog/{slug}(lang=${lang},slug=${post.slug})}"
                       class="carousel-card">

                        <img th:src="${post.imageUrl ?: '/images/placeholder.png'}"/>

                        <div class="carousel-card-body">
                            <small>AI</small>
                            <h6 th:text="${post.title}"></h6>

                            <!-- STATS -->
                            <div class="carousel-meta">
                                <span>
                                    <i class="bi bi-eye"></i>
                                    <span th:text="${post.views}">0</span>
                                </span>

                                <span class="dot">‚Ä¢</span>

                                <span>
                                    <span th:text="${post.readingTimeMinutes ?: 1}">1</span> min read
                                </span>

                                <span class="dot">‚Ä¢</span>

                                <span th:text="${post.timeAgo}">2 hr ago</span>

                            </div>
                        </div>
                    </a>
                </div>

                <!-- RIGHT -->
                <button class="carousel-arrow right"
                        onclick="scrollCarousel(this, 1)">
                    <i class="bi bi-chevron-right"></i>
                </button>

            </div>
        </section>

        <!-- ================= TRENDING TECH ================= -->
        <section class="home-carousel-section mt-5"
                 th:if="${trendingAI != null and !#lists.isEmpty(trendingAI)}">

            <div class="carousel-header">
                <h3 class="carousel-title">üíª Trending in Tech</h3>
                <a th:href="@{/{lang}/category/TECH(lang=${lang})}"
                   class="carousel-view-all">View all</a>
            </div>

            <div class="carousel-wrapper">

                <!-- LEFT -->
                <button class="carousel-arrow left hidden"
                        onclick="scrollCarousel(this, -1)">
                    <i class="bi bi-chevron-left"></i>
                </button>

                <!-- TRACK -->
                <div class="carousel-track">
                    <a th:each="post : ${trendingTech}"
                       th:href="@{/{lang}/blog/{slug}(lang=${lang},slug=${post.slug})}"
                       class="carousel-card">

                        <img th:src="${post.imageUrl ?: '/images/placeholder.png'}"/>

                        <div class="carousel-card-body">
                            <small>AI</small>
                            <h6 th:text="${post.title}"></h6>

                            <!-- STATS -->
                            <div class="carousel-meta">
                                <span>
                                    <i class="bi bi-eye"></i>
                                    <span th:text="${post.views}">0</span>
                                </span>

                                <span class="dot">‚Ä¢</span>

                                <span>
                                    <span th:text="${post.readingTimeMinutes ?: 1}">1</span> min read
                                </span>

                                <span class="dot">‚Ä¢</span>

                                <span th:text="${post.timeAgo}">2 hr ago</span>

                            </div>
                        </div>
                    </a>
                </div>

                <!-- RIGHT -->
                <button class="carousel-arrow right"
                        onclick="scrollCarousel(this, 1)">
                    <i class="bi bi-chevron-right"></i>
                </button>

            </div>
        </section>

        <!-- ================= TRENDING Social media ================= -->
        <section class="home-carousel-section mt-5"
                 th:if="${socialMedia != null and !#lists.isEmpty(socialMedia)}">

            <div class="carousel-header">
                <h3 class="carousel-title">üì≤ Trending in Social Media</h3>
                <a th:href="@{/{lang}/category/SOCIAL_MEDIA(lang=${lang})}"
                   class="carousel-view-all">View all</a>
            </div>

            <div class="carousel-wrapper">

                <!-- LEFT -->
                <button class="carousel-arrow left hidden"
                        onclick="scrollCarousel(this, -1)">
                    <i class="bi bi-chevron-left"></i>
                </button>

                <!-- TRACK -->
                <div class="carousel-track">
                    <a th:each="post : ${socialMedia}"
                       th:href="@{/{lang}/blog/{slug}(lang=${lang},slug=${post.slug})}"
                       class="carousel-card">

                        <img th:src="${post.imageUrl ?: '/images/placeholder.png'}"/>

                        <div class="carousel-card-body">
                            <small>AI</small>
                            <h6 th:text="${post.title}"></h6>

                            <!-- STATS -->
                            <div class="carousel-meta">
                                <span>
                                    <i class="bi bi-eye"></i>
                                    <span th:text="${post.views}">0</span>
                                </span>

                                <span class="dot">‚Ä¢</span>

                                <span>
                                    <span th:text="${post.readingTimeMinutes ?: 1}">1</span> min read
                                </span>

                                <span class="dot">‚Ä¢</span>

                                <span th:text="${post.timeAgo}">2 hr ago</span>

                            </div>
                        </div>
                    </a>
                </div>

                <!-- RIGHT -->
                <button class="carousel-arrow right"
                        onclick="scrollCarousel(this, 1)">
                    <i class="bi bi-chevron-right"></i>
                </button>

            </div>
        </section>

        <!-- ================= MONEY & BUSINESS ================= -->
        <section class="home-carousel-section mt-5"
                 th:if="${trendingMoney != null and !#lists.isEmpty(trendingMoney)}">

            <div class="carousel-header">
                <h3 class="carousel-title">üí∞ Money & Business</h3>
                <a th:href="@{/{lang}/category/MONEY(lang=${lang})}"
                   class="carousel-view-all">View all</a>
            </div>

            <!-- ‚¨ÖÔ∏è‚û°Ô∏è REQUIRED WRAPPER -->
            <div class="carousel-wrapper">

                <!-- LEFT ARROW -->
                <button class="carousel-arrow left hidden"
                        onclick="scrollCarousel(this, -1)">
                    <i class="bi bi-chevron-left"></i>
                </button>

                <!-- TRACK -->
                <div class="carousel-track">
                    <a th:each="post : ${trendingMoney}"
                       th:href="@{/{lang}/blog/{slug}(lang=${lang},slug=${post.slug})}"
                       class="carousel-card">

                        <img th:src="${post.imageUrl ?: '/images/placeholder.png'}"/>

                        <div class="carousel-card-body">
                            <small>Money</small>
                            <h6 th:text="${post.title}"></h6>

                            <!-- STATS -->
                            <div class="carousel-meta">
                                <span>
                                    <i class="bi bi-eye"></i>
                                    <span th:text="${post.views}">0</span>
                                </span>

                                <span class="dot">‚Ä¢</span>

                                <span>
                                    <span th:text="${post.readingTimeMinutes ?: 1}">1</span> min read
                                </span>

                                <span class="dot">‚Ä¢</span>

                                <span th:text="${post.timeAgo}">2 hr ago</span>

                            </div>
                        </div>
                    </a>
                </div>

                <!-- RIGHT ARROW -->
                <button class="carousel-arrow right"
                        onclick="scrollCarousel(this, 1)">
                    <i class="bi bi-chevron-right"></i>
                </button>

            </div>
        </section>

        <!--&lt;!&ndash; ================= SKIN & HEALTH ================= &ndash;&gt;
        <section class="home-carousel-section mt-5"
                 th:if="${trendingSkin != null and !#lists.isEmpty(trendingSkin)}">

            <div class="carousel-header">
                <h3 class="carousel-title">üåø Skin & Health</h3>
                <a th:href="@{/{lang}/category/SKIN_HEALTH(lang=${lang})}"
                   class="carousel-view-all">View all</a>
            </div>

            &lt;!&ndash; ‚¨ÖÔ∏è‚û°Ô∏è REQUIRED WRAPPER &ndash;&gt;
            <div class="carousel-wrapper">

                &lt;!&ndash; LEFT ARROW &ndash;&gt;
                <button class="carousel-arrow left hidden"
                        onclick="scrollCarousel(this, -1)">
                    <i class="bi bi-chevron-left"></i>
                </button>

                &lt;!&ndash; TRACK &ndash;&gt;
                <div class="carousel-track">
                    <a th:each="post : ${trendingSkin}"
                       th:href="@{/{lang}/blog/{slug}(lang=${lang},slug=${post.slug})}"
                       class="carousel-card">

                        <img th:src="${post.imageUrl ?: '/images/placeholder.png'}"/>

                        <div class="carousel-card-body">
                            <small>Health</small>
                            <h6 th:text="${post.title}"></h6>

                            &lt;!&ndash; STATS &ndash;&gt;
                            <div class="carousel-meta">
                                <span>
                                    <i class="bi bi-eye"></i>
                                    <span th:text="${post.views}">0</span>
                                </span>

                                <span class="dot">‚Ä¢</span>

                                <span>
                                    <span th:text="${post.readingTimeMinutes ?: 1}">1</span> min read
                                </span>

                                <span class="dot">‚Ä¢</span>

                                <span th:text="${post.timeAgo}">2 hr ago</span>

                            </div>
                        </div>
                    </a>
                </div>

                &lt;!&ndash; RIGHT ARROW &ndash;&gt;
                <button class="carousel-arrow right"
                        onclick="scrollCarousel(this, 1)">
                    <i class="bi bi-chevron-right"></i>
                </button>

            </div>
        </section>-->

        <!--&lt;!&ndash; ================= BEAUTY & STYLE ================= &ndash;&gt;
        <section class="home-carousel-section mt-5"
                 th:if="${trendingBeauty != null and !#lists.isEmpty(trendingBeauty)}">

            <div class="carousel-header">
                <h3 class="carousel-title">üíÑ Beauty & Style</h3>
                <a th:href="@{/{lang}/category/BEAUTY_AND_STYLE(lang=${lang})}"
                   class="carousel-view-all">View all</a>
            </div>

            &lt;!&ndash; ‚¨ÖÔ∏è‚û°Ô∏è WRAPPER REQUIRED &ndash;&gt;
            <div class="carousel-wrapper">

                &lt;!&ndash; LEFT ARROW &ndash;&gt;
                <button class="carousel-arrow left hidden"
                        onclick="scrollCarousel(this, -1)">
                    <i class="bi bi-chevron-left"></i>
                </button>

                &lt;!&ndash; TRACK &ndash;&gt;
                <div class="carousel-track">
                    <a th:each="post : ${trendingBeauty}"
                       th:href="@{/{lang}/blog/{slug}(lang=${lang},slug=${post.slug})}"
                       class="carousel-card">

                        <img th:src="${post.imageUrl ?: '/images/placeholder.png'}"/>

                        <div class="carousel-card-body">
                            <small>Beauty</small>
                            <h6 th:text="${post.title}"></h6>

                            &lt;!&ndash; STATS &ndash;&gt;
                            <div class="carousel-meta">
                                <span>
                                    <i class="bi bi-eye"></i>
                                    <span th:text="${post.views}">0</span>
                                </span>

                                <span class="dot">‚Ä¢</span>

                                <span>
                                    <span th:text="${post.readingTimeMinutes ?: 1}">1</span> min read
                                </span>

                                <span class="dot">‚Ä¢</span>

                                <span th:text="${post.timeAgo}">2 hr ago</span>

                            </div>
                        </div>
                    </a>
                </div>

                &lt;!&ndash; RIGHT ARROW &ndash;&gt;
                <button class="carousel-arrow right"
                        onclick="scrollCarousel(this, 1)">
                    <i class="bi bi-chevron-right"></i>
                </button>

            </div>
        </section>-->

    </div>
</div>

<!-- ================= FOOTER ================= -->
<div th:replace="~{fragments/footer :: footer}"></div>

<script>
    function updateCarouselArrows(wrapper) {
        const track = wrapper.querySelector('.carousel-track');
        const leftArrow = wrapper.querySelector('.carousel-arrow.left');
        const rightArrow = wrapper.querySelector('.carousel-arrow.right');

        const scrollLeft = track.scrollLeft;
        const maxScroll = track.scrollWidth - track.clientWidth;

        // LEFT
        if (scrollLeft <= 5) {
            leftArrow.classList.add('hidden');
        } else {
            leftArrow.classList.remove('hidden');
        }

        // RIGHT
        if (scrollLeft >= maxScroll - 5) {
            rightArrow.classList.add('hidden');
        } else {
            rightArrow.classList.remove('hidden');
        }
    }

    function scrollCarousel(btn, direction) {
        const wrapper = btn.closest('.carousel-wrapper');
        const track = wrapper.querySelector('.carousel-track');

        const scrollAmount = track.clientWidth * 0.9;

        track.scrollBy({
            left: direction * scrollAmount,
            behavior: 'smooth'
        });

        // update after scroll animation
        setTimeout(() => updateCarouselArrows(wrapper), 350);
    }

    // INIT all carousels
    document.addEventListener("DOMContentLoaded", () => {
        document.querySelectorAll('.carousel-wrapper').forEach(wrapper => {
            const track = wrapper.querySelector('.carousel-track');

            updateCarouselArrows(wrapper);

            // update on manual scroll / touch
            track.addEventListener('scroll', () => {
                updateCarouselArrows(wrapper);
            });
        });
    });
</script>
<script>
    function updateHeaderOffset() {
        const header = document.querySelector('header');
        if (!header) return;

        document.documentElement.style.setProperty(
            '--header-height',
            header.offsetHeight + 'px'
        );
    }

    window.addEventListener('load', updateHeaderOffset);
    window.addEventListener('resize', updateHeaderOffset);
</script>
</body>
</html>